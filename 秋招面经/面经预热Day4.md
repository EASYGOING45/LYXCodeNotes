# 面经预热Day4

## HTTP和HTTPS的区别

HTTP的URL由“http://”起始且默认使⽤端80 

HTTPS的URL由“https://”起始且默认使⽤端443。

HTTP（超文本传输协议）和HTTPS（安全超文本传输协议）是用于在客户端和服务器之间传输数据的协议。它们之间的主要区别在于安全性和数据传输方式。

1. 安全性：
   - HTTP是明文传输的协议，数据在传输过程中不加密，容易被窃听和篡改。
   - HTTPS使用SSL（安全套接字层）或TLS（传输层安全）协议对数据进行加密，确保数据在传输过程中的安全性和完整性。
   - HTTPS通过使用数字证书验证服务器的身份，可以防止中间人攻击。
2. 数据传输方式：
   - HTTP使用默认的TCP（传输控制协议）端口80进行数据传输。
   - HTTPS使用默认的SSL/TLS加密协议端口443进行数据传输。
3. 部署和成本：
   - HTTP不需要证书，部署相对简单，成本较低。
   - HTTPS需要服务器证书，通常需要购买和配置证书，部署和维护相对复杂，成本较高。
4. SEO（搜索引擎优化）：
   - HTTPS被搜索引擎视为更安全和可信的协议，使用HTTPS可以提高网站的搜索引擎排名。

总结来说，HTTPS相对于HTTP提供了更高的安全性和数据传输的保密性。对于需要保护用户敏感信息（如登录凭证、支付信息等）的网站和应用程序，使用HTTPS是必要的。对于普通的静态网页或无需保护数据安全的场景，HTTP是足够的。

## HTTPS用到了哪些加密技术？

HTTPS使用了以下加密技术来确保数据传输的安全性：

1. SSL（安全套接字层）/ TLS（传输层安全）协议：TLS是SSL的继任者，是一种为网络通信提供安全性的协议。它使用对称和非对称加密算法来加密数据，并使用数字证书验证服务器的身份。

2. 对称加密算法：在数据传输过程中，对称加密算法用于加密和解密数据。常见的对称加密算法有AES（高级加密标准）和3DES（Triple Data Encryption Standard）。

3. 非对称加密算法：非对称加密算法使用公钥和私钥配对来进行加密和解密操作。公钥由服务器发送给客户端，用于加密数据；私钥由服务器保留，并用于解密数据。常见的非对称加密算法有RSA和ECC（椭圆曲线加密算法）。

4. 数字证书：数字证书是由权威的证书颁发机构（CA）签发的，用于验证服务器的身份。数字证书包含服务器的公钥和其他相关信息，客户端可以使用这些信息来验证服务器的身份和建立安全连接。

相比之下，HTTP是明文传输的协议，不使用加密技术来保护数据的安全性。HTTP的数据传输是不安全的，容易被窃听和篡改。而HTTPS使用了SSL/TLS协议和加密算法来加密数据，确保数据在传输过程中的安全性和完整性。通过使用数字证书验证服务器的身份，HTTPS可以防止中间人攻击。因此，HTTPS相对于HTTP提供了更高的安全性和数据传输的保密性。

## 打开一个网页的过程中使用到了哪些协议？

在打开一个网页的过程中，涉及到以下几个协议：

1. DNS（域名系统）协议：在打开网页之前，浏览器首先需要将网页的域名解析成对应的 IP 地址。这个解析过程使用 DNS 协议进行，通过向 DNS 服务器发送查询请求来获取域名对应的 IP 地址。

2. HTTP（超文本传输协议）或 HTTPS（安全超文本传输协议）协议：网页通常使用 HTTP 或 HTTPS 协议进行数据传输。HTTP 协议是一种在客户端和服务器之间传输数据的协议，而 HTTPS 在 HTTP 的基础上增加了安全性，通过 SSL/TLS 协议对数据进行加密。

3. TCP（传输控制协议）协议：HTTP 和 HTTPS 协议都是基于 TCP 协议的。TCP 提供了可靠的数据传输，通过建立连接、分段、确认和重传等机制来确保数据的完整性和可靠性。

4. IP（互联网协议）协议：TCP 协议使用 IP 协议进行数据包的传输。IP 协议负责将数据包从源地址传输到目标地址，通过 IP 地址来标识和寻址网络上的设备。

5. SSL（安全套接字层）/ TLS（传输层安全）协议：如果网页使用了 HTTPS 协议，那么在 HTTP 的基础上会使用 SSL/TLS 协议对数据进行加密和认证，保证数据在传输过程中的安全性。

综上所述，打开一个网页的过程中，客户端和服务器之间会使用 DNS 协议进行域名解析，然后建立 TCP 连接，使用 HTTP 或 HTTPS 协议进行数据传输，最终通过 IP 协议将数据包传输到目标地址。如果使用了 HTTPS，还会使用 SSL/TLS 协议对数据进行加密和认证。

## 讲解一下DNS过程，DNS服务器是如何逐级解析的

DNS（域名系统）是用于将域名解析为对应的 IP 地址的系统。当浏览器输入网址（例如www.google.com）并请求打开网页时，DNS 将按照以下步骤进行逐级解析：

1. 本地缓存查询：首先，计算机会在自己的本地缓存中查找之前解析过的域名。如果在缓存中找到了对应的 IP 地址，就可以直接使用，不需要进行后续的解析过程。

2. hosts 文件查询：如果在本地缓存中没有找到对应的 IP 地址，计算机会检查操作系统的 hosts 文件。hosts 文件是一个本地的映射表，可以手动配置域名和对应的 IP 地址。如果在 hosts 文件中找到了对应的映射，就会使用该 IP 地址。

3. DNS 递归解析：如果在本地缓存和 hosts 文件中都没有找到对应的 IP 地址，计算机会向本地网络连接的 DNS 服务器发送查询请求。通常，该 DNS 服务器由互联网服务提供商（ISP）提供。

   - 首先，计算机会向本地 DNS 服务器发送一个递归查询请求，该请求包含要解析的域名（例如www.google.com）。
   - 本地 DNS 服务器会先查看自己的缓存，如果有对应的解析结果，就直接返回给计算机。
   - 如果本地 DNS 服务器的缓存中没有对应的解析结果，它会向根域名服务器发送查询请求。

4. 根域名服务器解析：根域名服务器是 DNS 层级结构的顶级服务器，负责管理顶级域名（例如.com、.org 等）的 DNS 服务器地址。本地 DNS 服务器会向根域名服务器发送查询请求，请求获取负责顶级域名的 DNS 服务器的地址。

5. 顶级域名服务器解析：根域名服务器返回负责顶级域名的 DNS 服务器的地址给本地 DNS 服务器。本地 DNS 服务器会向该服务器发送查询请求，请求获取负责二级域名（例如google.com）的 DNS 服务器的地址。

6. 权限域名服务器解析：顶级域名服务器返回负责二级域名的 DNS 服务器的地址给本地 DNS 服务器。本地 DNS 服务器会向该服务器发送查询请求，请求获取负责解析 www.google.com 的 IP 地址。

7. 解析结果返回：权限域名服务器将解析得到的 IP 地址返回给本地 DNS 服务器。本地 DNS 服务器将 IP 地址缓存，并将结果返回给计算机。

8. 计算机访问网页：计算机收到解析结果后，使用得到的 IP 地址与目标服务器建立 TCP 连接，并发送 HTTP 请求，最终获得网页数据并在浏览器中显示。

整个 DNS 解析过程中，从本地缓存到根域名服务器再到权限域名服务器，逐级查询的目的是为了最终找到负责解析目标域名的 DNS 服务器，并获取到对应的 IP 地址。这样，计算机就可以通过 IP 地址与目标服务器进行通信和数据交换。

## 讲解一下TCP四次挥手，time-wait、close-wait是干嘛的？

TCP 四次挥手是指在关闭一个 TCP 连接时，双方通信的两个进程之间的关闭过程。它与 TCP 三次握手建立连接的过程相对应。下面是 TCP 四次挥手的详细过程：

1. 第一次挥手（FIN_WAIT_1）：主动关闭方发送一个 FIN（Finish）报文给被动关闭方，表示主动关闭方已经发送完数据，请求关闭连接。此时主动关闭方进入 FIN_WAIT_1 状态，等待被动关闭方的确认。

2. 第二次挥手（CLOSE_WAIT）：被动关闭方收到 FIN 报文后，发送一个 ACK（Acknowledgment）报文作为确认，表示收到了主动关闭方的关闭请求。此时被动关闭方进入 CLOSE_WAIT 状态，等待自己发送完数据。

3. 第三次挥手（LAST_ACK）：被动关闭方发送一个 FIN 报文给主动关闭方，表示被动关闭方也已经发送完数据，请求关闭连接。此时被动关闭方进入 LAST_ACK 状态。

4. 第四次挥手（TIME_WAIT）：主动关闭方收到 FIN 报文后，发送一个 ACK 报文作为确认，表示收到了被动关闭方的关闭请求。此时主动关闭方进入 TIME_WAIT 状态。

   - 主动关闭方进入 TIME_WAIT 状态的目的是等待可能出现的被动关闭方的重传，确保对方收到了自己的 ACK 报文并成功关闭连接后才能关闭自己的连接。TIME_WAIT 状态持续一段时间（通常是 2 倍的最大报文段生存时间，即 MSL），然后才彻底关闭连接。

   - 被动关闭方在发送完最后一个 ACK 报文后，即可立即关闭连接。

TIME_WAIT 状态和 CLOSE_WAIT 状态是用来处理连接的关闭过程中可能出现的一些问题：

- TIME_WAIT 状态：在 TCP 连接关闭时，主动关闭方进入 TIME_WAIT 状态，等待可能出现的被动关闭方的重传。这样可以确保对方收到了自己的 ACK 报文并成功关闭连接。TIME_WAIT 状态持续一段时间，以防止之前连接的残留数据包对新的连接产生干扰。

- CLOSE_WAIT 状态：在 TCP 连接关闭时，被动关闭方进入 CLOSE_WAIT 状态，等待自己发送完数据。在 CLOSE_WAIT 状态下，被动关闭方可以继续接收主动关闭方发送的数据，直到被动关闭方主动关闭连接。

通过四次挥手的过程，双方可以安全地关闭 TCP 连接，确保数据的可靠传输和连接的正常关闭。TIME_WAIT 状态和 CLOSE_WAIT 状态则是为了处理连接关闭过程中的一些特殊情况和保证连接的可靠性。