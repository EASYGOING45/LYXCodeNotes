# 计网归档-Pt3

## 19、HTTPS是如何保证数据传输的安全的，整体的流程是什么？（SSL是怎么工作保证安全的）

1. 客户端向服务器端发起SSL连接请求
2. 服务器把公钥发送给客户端，并且服务器端保存着唯一的私钥
3. 客户端用公钥对双方通信的对称密钥进行加密，并发送给服务器端
4. 服务器利用自己唯一的私钥对客户端发来的对称密钥进行解密
5. 进行数据传输，服务器和客户端双方用公有的相同的对称密钥对数据进行加密解密，可以保证在数据收发过程中的安全，即使第三方获得数据包，也无法对其进行加密、解密、篡改

因为数字签名、摘要是证书防伪非常关键的武器。“摘要”就是对传输的内容，通过Hash算法计算出一段固定长度的串。然后，通过发送方的私钥对这段摘要进行加密，加密后得到的结果就是数字签名。

SSL/TLS协议的基本思路是采用公钥加密法，也就是说，客户端先向服务器端索要公钥，然后用公钥加密欣喜，服务器收到密文后，用自己的私钥解密。

SSL/TLS的四次握手，现在TLS1.2版本，使用ECDHE算法。

## 20、如何保证公钥不被篡改

将公钥放在数字证书中。只要证书是可信的，公钥就是可信的。

## 21、公钥加密计算量太大？如何减少耗用的时间？

每一次对话（session），客户端和服务器端都生成一个“对话密钥”（session key），用它来加密信息。

由于“对话密钥”是对称加密，所以运算速度非常快，而服务器公钥只用于加密“对话密钥”本身，这样就减少了加密运算的消耗时间。

1. 客户端向服务端索要并验证公钥
2. 双方协商生成对话密钥
3. 双方采用对话密钥进行加密通信
4. 第一第二步，又称为握手阶段。

## 22、HTTP请求和响应报文有哪些主要字段？

### 请求报文

- 请求行 Request Line
- 请求头 Request Headers
- 请求体 Request Body

### 响应报文

- 状态行 Status Line
- 响应头 Response Headers
- 响应体 Response Body

## 23、Cookie是什么？

HTTP协议是无状态的，主要是为了让HTTP协议尽可能简单，使得它能够处理大量事务，HTTP/1.1 引入Cookie来保存状态信息。

Cookie是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器之后向同意服务器再次发起请求时被携带上，用于告知服务端两个请求是否来自同一浏览器。由于之后每次请求都会需要携带Cookie数据，因此会带来额外的性能开销（尤其是在移动环境下）

Cookie曾一度用于客户端数据的存储，因为当时并没有其它合适的存储方法而作为唯一的存储手段，但现在随着现代浏览器开始支持各种各样的存储方式，cookie渐渐被淘汰。

新的浏览器 API 已经允许开发者直接将数据存储到本地，如使用 Web storage API（本地存储和会话存储）或 IndexedDB。

cookie 的出现是因为 HTTP 是无状态的一种协议，换句话说，服务器记不住你，可能你每刷新一次网页，就要重新输入一次账号密码进行登录。这显然是让人无法接受的，cookie 的作用就好比服务器给你贴个标签，然后你每次向服务器再发请求时，服务器就能够 cookie 认出你。

抽象地概括一下：一个Cookie可以认为是一个变量，形如name=value，存储在浏览器；一个session可以理解为一种数据结构，多数情况是【映射】（键值对），存储在服务器上。

## 24、Cookie有什么用途？

- 会话状态管理（如用户登陆状态、购物车、游戏分数等）
- 个性化设置
- 浏览器行为跟踪